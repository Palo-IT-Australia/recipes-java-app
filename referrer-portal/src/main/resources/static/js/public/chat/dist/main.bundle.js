webpackJsonp([1],{"+h1B":function(n,t,l){"use strict";var e=l("/oeL"),i=l("aR8+"),u=l("wQAS"),o=l("q4dy"),s=l("qbdv"),a=l("fc+i"),r=l("bm2B"),c=l("CPp0"),g=l("Z9N4");l.d(t,"a",function(){return p});var p=e.b(i.a,[u.a],function(n){return e.c([e.d(512,e.e,e.f,[[8,[o.a]],[3,e.e],e.g]),e.d(5120,e.h,e.i,[[3,e.h]]),e.d(4608,s.a,s.b,[e.h]),e.d(4608,e.j,e.j,[]),e.d(5120,e.k,e.l,[]),e.d(5120,e.m,e.n,[]),e.d(5120,e.o,e.p,[]),e.d(4608,a.b,a.c,[s.c]),e.d(6144,e.q,null,[a.b]),e.d(4608,a.d,a.e,[]),e.d(5120,a.f,function(n,t,l,e){return[new a.g(n),new a.h(t),new a.i(l,e)]},[s.c,s.c,s.c,a.d]),e.d(4608,a.j,a.j,[a.f,e.r]),e.d(135680,a.k,a.k,[s.c]),e.d(4608,a.l,a.l,[a.j,a.k]),e.d(6144,e.s,null,[a.l]),e.d(6144,a.m,null,[a.k]),e.d(4608,e.t,e.t,[e.r]),e.d(4608,a.n,a.n,[s.c]),e.d(4608,a.o,a.o,[s.c]),e.d(4608,r.a,r.a,[]),e.d(4608,c.a,c.a,[]),e.d(4608,c.b,c.c,[]),e.d(5120,c.d,c.e,[]),e.d(4608,c.f,c.f,[c.a,c.b,c.d]),e.d(4608,c.g,c.h,[]),e.d(5120,c.i,c.j,[c.f,c.g]),e.d(4608,r.b,r.b,[]),e.d(4608,g.a,g.a,[c.i]),e.d(512,s.d,s.d,[]),e.d(1024,e.u,a.p,[]),e.d(1024,e.v,function(n,t){return[a.q(n,t)]},[[2,a.r],[2,e.w]]),e.d(512,e.x,e.x,[[2,e.v]]),e.d(131584,e.y,e.y,[e.r,e.z,e.A,e.u,e.e,e.x]),e.d(2048,e.B,null,[e.y]),e.d(512,e.C,e.C,[e.B]),e.d(512,a.s,a.s,[[3,a.s]]),e.d(512,r.c,r.c,[]),e.d(512,r.d,r.d,[]),e.d(512,c.k,c.k,[]),e.d(512,r.e,r.e,[]),e.d(512,i.a,i.a,[])])})},0:function(n,t,l){n.exports=l("cDNt")},HJV5:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=[".overlay[_ngcontent-%COMP%]{width:100%;height:100%;top:40px;background-color:rgba(0,0,0,.4);z-index:9999}.dialog[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%]{position:absolute;left:0}.dialog[_ngcontent-%COMP%]{z-index:12000;right:0;top:50px;margin-right:auto;margin-left:auto;min-height:150px;width:80%;max-width:520px;background-color:#fff;padding:12px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}"]},NhKt:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=[".chat-main[_ngcontent-%COMP%]{z-index:11999}.main-text[_ngcontent-%COMP%]{color:#fff}.toggler[_ngcontent-%COMP%]{background-color:#eee;position:fixed;right:0;bottom:0;border:1px solid transparent;border-radius:4px}.switch-on[_ngcontent-%COMP%]{height:600px;width:400px;max-height:95%;max-width:100%}.switch-off[_ngcontent-%COMP%]{height:40px;width:100px}.switcher[_ngcontent-%COMP%]{height:40px;background-color:#f7921e;padding:5px;cursor:pointer;font-weight:700}.chat-icon[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block}.error-text[_ngcontent-%COMP%]{color:#3a3a3a;font-weight:700}"]},"P/ez":function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=function(){function n(){this.visible=!1}return n.prototype.ngOnInit=function(){},n.ctorParameters=function(){return[]},n}()},Z9N4:function(n,t,l){"use strict";var e=l("/zHi"),i=(l.n(e),l("xpf9")),u=(l.n(i),l("CPp0"));l.d(t,"a",function(){return o});var o=function(){function n(n){var t=this;this.http=n,this.ININ_ROOT="/imedchat/",this.ININ_ROOT2="/imedchat2/",this.ININ_CHAT="chat/",this.ININ_QUEUE="queue/",this.http.get(this.ININ_ROOT+"serverConfiguration").subscribe(function(n){t.activeIninRoot=t.ININ_ROOT,console.log("Active chat URL = "+t.activeIninRoot)},function(n){t.http.get(t.ININ_ROOT2+"serverConfiguration").subscribe(function(n){t.activeIninRoot=t.ININ_ROOT2,console.log("Active chat URL = "+t.activeIninRoot)},function(n){console.log("Chat servers are not available.")})})}return n.prototype.isIninAvailable=function(){return this.activeIninRoot&&this.activeIninRoot.length>0},n.prototype.getIninRoot=function(){return this.activeIninRoot},n.prototype.startChat=function(n,t){var l={supportedContentTypes:"text/plain",participant:{name:n,credentials:""},transcriptRequired:!1,emailAddress:null,target:t,targetType:"Workgroup",language:"en-us",clientToken:"deprecated"};return this.http.post(this.activeIninRoot+this.ININ_CHAT+"start",l).map(function(n){return n.json()})},n.prototype.exitChat=function(n){return this.http.post(this.activeIninRoot+this.ININ_CHAT+"exit/"+n,{}).map(function(n){return n.json()})},n.prototype.pollEvent=function(n){return this.http.get(this.activeIninRoot+this.ININ_CHAT+"poll/"+n).map(function(n){return n.json()})},n.prototype.sendMessage=function(n,t){var l={message:t,contentType:"text/plain"};return this.http.post(this.activeIninRoot+this.ININ_CHAT+"sendMessage/"+n,l).map(function(n){return n.json()})},n.prototype.sendTypingState=function(n,t){return this.http.post(this.activeIninRoot+this.ININ_CHAT+"setTypingState/"+n,{typingIndicator:t}).map(function(n){return n.json()})},n.prototype.queueQuery=function(n,t){var l={queueName:t,queueType:"Workgroup",participant:{name:n,credentials:""}};return this.http.post(this.activeIninRoot+this.ININ_QUEUE+"query",l).map(function(n){return n.json()})},n.ctorParameters=function(){return[{type:u.i}]},n}()},"aR8+":function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=function(){function n(){}return n}()},c3re:function(n,t,l){"use strict";var e=l("/oeL"),i=l("bm2B");l.d(t,"a",function(){return u});var u=function(){function n(n){this.fb=n,this.startChat=new e.R}return n.prototype.ngOnInit=function(){this.username||(this.username=""),this.starterForm=this.fb.group({userName:[this.username,i.p.required],queueName:[this.queues[0].name,i.p.required]})},n.prototype.onStartChat=function(){console.log(this.starterForm.value),this.startChat.emit(this.starterForm.value)},n.ctorParameters=function(){return[{type:i.b}]},n}()},cDNt:function(n,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=l("/oeL"),i=l("p5Ee"),u=l("+h1B"),o=l("fc+i");i.a.production&&l.i(e.a)(),l.i(o.a)().bootstrapModuleFactory(u.a)},p5Ee:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e={production:!0}},pEqO:function(n,t,l){"use strict";var e=l("/oeL"),i=l("5v8a"),u=(l.n(i),l("eqpX")),o=(l.n(u),l("Pic8")),s=(l.n(o),l("ACG2")),a=(l.n(s),l("bm2B")),r=l("fc+i");l.d(t,"a",function(){return c});var c=function(){function n(n,t){this.fb=n,this.sanitizer=t,this.exitChat=new e.R,this.sendMessage=new e.R,this.messageForm=this.fb.group({newMessage:""})}return n.prototype.ngOnInit=function(){},n.prototype.ngOnChanges=function(n){var t=this;setTimeout(function(){t.messageListElement.nativeElement.scrollTop=t.messageListElement.nativeElement.scrollHeight},300)},n.prototype.onSendMessage=function(){this.sendMessage.emit(this.messageForm.get("newMessage").value),this.messageForm.get("newMessage").setValue("")},n.prototype.onExitChat=function(){this.exitChat.emit()},n.prototype.getTypingNotice=function(){return this.isTyping?"* I-MED is typing...":"*"},n.prototype.getSafeUrl=function(n){return this.sanitizer.bypassSecurityTrustUrl(n)},n.prototype.getFileNameFromUrl=function(n){return decodeURIComponent(n.split("/").pop())},n.prototype.getEncodedMessageTxt=function(n){var t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,l=/(^|[^\/])(www\.[\S]+(\b|$))/gim;return n.replace(t,'<a href="$1" target="_blank">$1</a>').replace(l,'$1<a href="http://$2" target="_blank">$2</a>')},n.ctorParameters=function(){return[{type:a.b},{type:r.b}]},n}()},q4dy:function(n,t,l){"use strict";function e(n){return c._17(0,[(n()(),c._18(0,null,null,1,"h3",[["class","error-text"]],null,null,null,null,null)),(n()(),c._19(null,["Chat service is currently unavaliable. Please try again later."]))],null,null)}function i(n){return c._17(0,[(n()(),c._18(0,null,null,1,"imed-chat-starter",[],null,[[null,"startChat"]],function(n,t,l){var e=!0,i=n.component;if("startChat"===t){e=!1!==i.startChat(l)&&e}return e},g.a,g.b)),c._20(114688,null,0,p.a,[h.b],{queues:[0,"queues"],username:[1,"username"]},{startChat:"startChat"})],function(n,t){var l=t.component;n(t,1,0,l.queues,l.username)},null)}function u(n){return c._17(0,[(n()(),c._18(0,null,null,1,"imed-chat-messenger",[],null,[[null,"sendMessage"],[null,"exitChat"]],function(n,t,l){var e=!0,i=n.component;if("sendMessage"===t){e=!1!==i.sendMessage(l)&&e}if("exitChat"===t){e=!1!==i.showExitConfirmModalDialog(l)&&e}return e},f.a,f.b)),c._20(638976,null,0,d.a,[h.b,m.b],{messages:[0,"messages"],isTyping:[1,"isTyping"]},{exitChat:"exitChat",sendMessage:"sendMessage"})],function(n,t){var l=t.component;n(t,1,0,l.messages,l.isTyping)},null)}function o(n){return c._17(0,[(n()(),c._18(0,null,null,32,"div",[["class","chat-main toggler"]],null,null,null,null,null)),c._20(278528,null,0,_.h,[c.m,c.o,c.J,c._9],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),c._21({"switch-on":0,"switch-off":1}),(n()(),c._19(null,["\n  "])),(n()(),c._18(0,null,null,5,"div",[["class","switcher"]],null,[[null,"click"]],function(n,t,l){var e=!0,i=n.component;if("click"===t){e=!1!==i.onClickSwitcher()&&e}return e},null,null)),(n()(),c._19(null,["\n  "])),(n()(),c._18(0,null,null,0,"img",[["class","chat-icon"],["height","32"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAEpElEQVRYR+2YbUxbVRjHz73tbbmlpSOFbdkAIWGgCKG+pFDCti46SmIcuBnFmMXti+KXKUEHfJgyF6VOkfnJqR9cMpNtiUyYxvDiQreRVpi61rpNGYwCe4GNSqHX296X3mvO1TYwWtrS0mJCP530vP3Oc57zv8/zIGCV/5BVzgfWAKO9oWVbcOdR03aER3QKqbgaQjBePoNivGmwLcVE05gIuQXbLort4BHe2Huw7MJyYCMCrGwx66QStMnDcBXpyiSiKEspV+eohH1VCglQKaRC2+GigMNFC23LqANYx5yzjjlKmYShPRTNtXQ1aY3hwoYFWPGhqVohxd5FEJD3XOlDMnVOKpBJROHuIYwjaS+wjM6Ab38aI3keDLko5nBPQ1lHqEWWBNS1XVmn5OgzCpmkbI82S67OTg21Xlj9FvsMaDePEy6SNs2ikheNdY85g00MCgivExEh328rSBfXlOf8e3cx/EGLnhscpy5eu8+yAC3vPaixBFo+IODOo4PqFAly6dWKPHneJkUMsRYvNXTHBb7oGSLmaH5rIMhFgD64N559RJ6pkq0onG/xCQcJPv3uekDIBYCVLeZskRi51rC7EI8X3HxIQ/vvJIlJN8/3yQWAVa0D3TuKNm6r0mQmxcV0D2zSOTjh6bNNXuysL9H7uvyAUErWp+Anj7xULE8EnG/PQ6esxL05916fBPkBq1oHbux7Kjc3VlKy3ENCCTpxfni4s75kC1xDAIS+l4yLbR/veyKh1vMd6q0TvxB/u9miriatXQDUG0zHdIUbaoPp3ZFvbOD2NLlcowSctzlNBg49XxSw73T/KNVnu2foadI2C4C72362vKbfUrzSmhfuCaE2ft59w3q27kn1/wNQbzDzx2tLwj1gXMbVHh8A3Y1a5D8fXBow3j4ILbAAcM0HI3SKRY+kqvWyoTRf9WZNeXbMw6oI2YThp/vtlPHqZGN3Q9kxv1DLZZjto1ceDyjU4frgUtoWCeiBLy/TDMvl+4Xap4V7d+QUr4ZP3VfnR0bO1Wty/Z862IDBwoYU/OR7CQ4W3jllJaYCBQsQsrp1sEdXtHFrlSYjQeHWLY/RNnmpo15TsSjcgn/AJEnGUHcb9xQmJShgdZOYdFPQgBVCwpBfjoELdbsKUuIFCUP+ts6rswSL6B7MS4ImTTjK/7j/6VzVSj+aiJMm391DS6Kc98r7L6v9FYNIpCLUWJh2dg5MUKY/7s9RPFIRUdopvOoWc/OjWcq3DzzzcMxTO6vdCdrNY4SLZMxOFHsh4sQdPpZklrpzuKYY99VbQlkkVD+0mNU+A86axwmOAyMETTcvu/Sx65OBz7R5afvnR9iwIDR01wW6fr3tnnJ68Kz0ZGfOejlekLlOiktRkKFK9tdrhOIRQQnMlpt/gd/GnLPTc5QSx0S9Htr7QVTFI5if8AgYfb0yH5A0C65PzNI3p1zuGYKWSMSiH0iG+RqeHJZGOAB0Cly8neeRVNbrzaBYTih1ScWoQywSCeU3wsN0oAAYI4GafxuLXrHeYO4ToUhpEib+k+P5YTfD9HOI2BjMiUNdbbT9YZXfot0kmvlrgNFYD879B/a4Ikd2Wkh8AAAAAElFTkSuQmCC"],["width","32"]],null,null,null,null,null)),(n()(),c._19(null,[" "])),(n()(),c._18(0,null,null,1,"span",[["class","main-text"]],null,null,null,null,null)),(n()(),c._19(null,["Chat"])),(n()(),c._19(null,["\n  "])),(n()(),c._22(16777216,null,null,1,null,e)),c._20(16384,null,0,_.i,[c._10,c._11],{ngIf:[0,"ngIf"]},null),(n()(),c._19(null,["\n  "])),(n()(),c._22(16777216,null,null,1,null,i)),c._20(16384,null,0,_.i,[c._10,c._11],{ngIf:[0,"ngIf"]},null),(n()(),c._19(null,["\n  "])),(n()(),c._22(16777216,null,null,1,null,u)),c._20(16384,null,0,_.i,[c._10,c._11],{ngIf:[0,"ngIf"]},null),(n()(),c._19(null,["\n  "])),(n()(),c._18(0,null,null,11,"imed-modal-dialog",[],null,null,null,v.a,v.b)),c._20(114688,null,0,b.a,[],{visible:[0,"visible"]},null),(n()(),c._19(0,["\n    "])),(n()(),c._18(0,null,0,1,"h4",[],null,null,null,null,null)),(n()(),c._19(null,["Would you really like to exit this chat?"])),(n()(),c._19(0,["\n    "])),(n()(),c._18(0,null,0,1,"button",[["class","btn btn-primary button-primary w-button"]],null,[[null,"click"]],function(n,t,l){var e=!0,i=n.component;if("click"===t){e=!1!==i.onExitChat()&&e}return e},null,null)),(n()(),c._19(null,["Exit"])),(n()(),c._19(0,["\n    "])),(n()(),c._18(0,null,0,1,"button",[["class","btn btn-default button-primary w-button"]],null,[[null,"click"]],function(n,t,l){var e=!0,i=n.component;if("click"===t){e=!1!=(i.showExitConfirmDialog=!1)&&e}return e},null,null)),(n()(),c._19(null,["Cancel"])),(n()(),c._19(0,["\n  "])),(n()(),c._19(null,["\n"]))],function(n,t){var l=t.component;n(t,1,0,"chat-main toggler",n(t,2,0,l.isSwitchOn,!l.isSwitchOn)),n(t,12,0,"CLOSED"==l.getCurrentStatus()),n(t,15,0,"INIT"==l.getCurrentStatus()),n(t,18,0,"ACTIVE"==l.getCurrentStatus()),n(t,21,0,l.showExitConfirmDialog)},null)}function s(n){return c._17(0,[(n()(),c._22(16777216,null,null,1,null,o)),c._20(16384,null,0,_.i,[c._10,c._11],{ngIf:[0,"ngIf"]},null),(n()(),c._19(null,["\n"]))],function(n,t){n(t,1,0,"CLOSED"!=t.component.getCurrentStatus())},null)}function a(n){return c._17(0,[(n()(),c._18(0,null,null,1,"imed-chat-root",[],null,null,null,s,x)),c._20(4440064,null,0,C.a,[y.a,c._9],null,null)],function(n,t){n(t,1,0)},null)}var r=l("NhKt"),c=l("/oeL"),g=l("uQwo"),p=l("c3re"),h=l("bm2B"),f=l("rcFN"),d=l("pEqO"),m=l("fc+i"),_=l("qbdv"),v=l("rgOa"),b=l("P/ez"),C=l("wQAS"),y=l("Z9N4");l.d(t,"a",function(){return S});var I=[r.a],x=c._16({encapsulation:0,styles:I,data:{}}),S=c._23("imed-chat-root",C.a,a,{},{},[])},"qG+G":function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=["button[_ngcontent-%COMP%]:disabled, button[_ngcontent-%COMP%]:disabled:hover{background-color:#bfbfbf;border:1px solid #bfbfbf}.starter-form[_ngcontent-%COMP%]{padding:6px}.w-select[_ngcontent-%COMP%]{margin-bottom:10px}.top-margin[_ngcontent-%COMP%]{margin-top:5px}"]},qtrl:function(n,t){function l(n){throw new Error("Cannot find module '"+n+"'.")}l.keys=function(){return[]},l.resolve=l,n.exports=l,l.id="qtrl"},r5vM:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=[".msg-list[_ngcontent-%COMP%]{overflow-y:scroll;height:350px;border-color:#f7921e;border-style:solid;border-width:2px;padding:0 4px;background-color:#fff}.normalTxt[_ngcontent-%COMP%]{color:#5e5e5e}.name-div[_ngcontent-%COMP%]{width:100%}.msg-value-div[_ngcontent-%COMP%]{margin:0;white-space:pre-line;width:85%}.msg-value[_ngcontent-%COMP%]{padding-left:15px}.msg-time-div[_ngcontent-%COMP%]{width:15%;float:right}.msg-time[_ngcontent-%COMP%]{float:right}"]},rcFN:function(n,t,l){"use strict";function e(n){return c._17(0,[(n()(),c._18(0,null,null,3,"span",[],null,null,null,null,null)),(n()(),c._18(0,null,null,1,"b",[],null,null,null,null,null)),(n()(),c._19(null,["",""])),(n()(),c._18(0,null,null,0,"br",[],null,null,null,null,null))],null,function(n,t){n(t,2,0,t.parent.context.$implicit.displayName)})}function i(n){return c._17(0,[(n()(),c._18(0,null,null,1,"a",[["class","msg-value"]],[[8,"href",4]],null,null,null,null)),(n()(),c._19(null,["",""]))],null,function(n,t){var l=t.component;n(t,0,0,l.getSafeUrl(t.parent.context.$implicit.value)),n(t,1,0,l.getFileNameFromUrl(t.parent.context.$implicit.value))})}function u(n){return c._17(0,[(n()(),c._18(0,null,null,0,"span",[["class","msg-value"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(n,t){n(t,0,0,t.component.getEncodedMessageTxt(t.parent.context.$implicit.value))})}function o(n){return c._17(0,[(n()(),c._18(0,null,null,13,"div",[["class","normalTxt"]],null,null,null,null,null)),(n()(),c._19(null,["\n    "])),(n()(),c._18(0,null,null,2,"div",[["class","msg-time-div"]],null,null,null,null,null)),(n()(),c._18(0,null,null,1,"span",[["class","msg-time"]],null,null,null,null,null)),(n()(),c._19(null,["",""])),(n()(),c._19(null,["\n    "])),(n()(),c._18(0,null,null,6,"div",[["class","msg-value-div"]],null,null,null,null,null)),(n()(),c._22(16777216,null,null,1,null,e)),c._20(16384,null,0,g.i,[c._10,c._11],{ngIf:[0,"ngIf"]},null),(n()(),c._22(16777216,null,null,1,null,i)),c._20(16384,null,0,g.i,[c._10,c._11],{ngIf:[0,"ngIf"]},null),(n()(),c._22(16777216,null,null,1,null,u)),c._20(16384,null,0,g.i,[c._10,c._11],{ngIf:[0,"ngIf"]},null),(n()(),c._19(null,["\n  "]))],function(n,t){var l=t.component;n(t,8,0,!l.messages[t.context.index-1]||t.context.$implicit.participantID!=l.messages[t.context.index-1].participantID),n(t,10,0,"file"==t.context.$implicit.type),n(t,12,0,"text"==t.context.$implicit.type||"url"==t.context.$implicit.type)},function(n,t){n(t,4,0,t.context.$implicit.createdAt)})}function s(n){return c._17(0,[c._25(402653184,1,{messageListElement:0}),(n()(),c._18(0,[[1,0],["messageList",1]],null,4,"div",[["class","msg-list"]],null,null,null,null,null)),(n()(),c._19(null,["\n  "])),(n()(),c._22(16777216,null,null,1,null,o)),c._20(802816,null,0,g.j,[c._10,c._11,c.m],{ngForOf:[0,"ngForOf"]},null),(n()(),c._19(null,["\n"])),(n()(),c._19(null,["\n"])),(n()(),c._18(0,null,null,4,"div",[["class","normalTxt"]],null,null,null,null,null)),(n()(),c._19(null,["\n  "])),(n()(),c._18(0,null,null,1,"span",[],null,null,null,null,null)),(n()(),c._19(null,["",""])),(n()(),c._19(null,["\n"])),(n()(),c._19(null,["\n"])),(n()(),c._18(0,null,null,13,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,t,l){var e=!0,i=n.component;if("submit"===t){e=!1!==c._26(n,15).onSubmit(l)&&e}if("reset"===t){e=!1!==c._26(n,15).onReset()&&e}if("ngSubmit"===t){e=!1!==i.onSendMessage()&&e}return e},null,null)),c._20(16384,null,0,h.f,[],null,null),c._20(540672,null,0,h.g,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),c._27(2048,null,h.h,null,[h.g]),c._20(16384,null,0,h.i,[h.h],null,null),(n()(),c._19(null,["\n  "])),(n()(),c._18(0,null,null,5,"textarea",[["class","form-control w-input"],["formControlName","newMessage"],["name","newMessage"],["rows","3"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,l){var e=!0,i=n.component;if("input"===t){e=!1!==c._26(n,20)._handleInput(l.target.value)&&e}if("blur"===t){e=!1!==c._26(n,20).onTouched()&&e}if("compositionstart"===t){e=!1!==c._26(n,20)._compositionStart()&&e}if("compositionend"===t){e=!1!==c._26(n,20)._compositionEnd(l.target.value)&&e}if("keyup.enter"===t){e=!1!==i.onSendMessage()&&e}return e},null,null)),c._20(16384,null,0,h.j,[c.I,c.J,[2,h.k]],null,null),c._27(1024,null,h.l,function(n){return[n]},[h.j]),c._20(671744,null,0,h.m,[[3,h.h],[8,null],[8,null],[2,h.l]],{name:[0,"name"]},null),c._27(2048,null,h.n,null,[h.m]),c._20(16384,null,0,h.o,[h.n],null,null),(n()(),c._19(null,["\n  "])),(n()(),c._19(null,["\n"])),(n()(),c._19(null,["\n"])),(n()(),c._18(0,null,null,1,"a",[["href","javascript:void(0)"]],null,[[null,"click"]],function(n,t,l){var e=!0,i=n.component;if("click"===t){e=!1!==i.onExitChat()&&e}return e},null,null)),(n()(),c._19(null,["Exit Chat"])),(n()(),c._19(null,["\n"]))],function(n,t){var l=t.component;n(t,4,0,l.messages),n(t,15,0,l.messageForm);n(t,22,0,"newMessage")},function(n,t){n(t,10,0,t.component.getTypingNotice()),n(t,13,0,c._26(t,17).ngClassUntouched,c._26(t,17).ngClassTouched,c._26(t,17).ngClassPristine,c._26(t,17).ngClassDirty,c._26(t,17).ngClassValid,c._26(t,17).ngClassInvalid,c._26(t,17).ngClassPending),n(t,19,0,c._26(t,24).ngClassUntouched,c._26(t,24).ngClassTouched,c._26(t,24).ngClassPristine,c._26(t,24).ngClassDirty,c._26(t,24).ngClassValid,c._26(t,24).ngClassInvalid,c._26(t,24).ngClassPending)})}function a(n){return c._17(0,[(n()(),c._18(0,null,null,1,"imed-chat-messenger",[],null,null,null,s,m)),c._20(638976,null,0,p.a,[h.b,f.b],null,null)],function(n,t){n(t,1,0)},null)}var r=l("r5vM"),c=l("/oeL"),g=l("qbdv"),p=l("pEqO"),h=l("bm2B"),f=l("fc+i");l.d(t,"b",function(){return m}),t.a=s;var d=[r.a],m=c._16({encapsulation:0,styles:d,data:{}});c._23("imed-chat-messenger",p.a,a,{messages:"messages",isTyping:"isTyping"},{exitChat:"exitChat",sendMessage:"sendMessage"},[])},rgOa:function(n,t,l){"use strict";function e(n){return a._17(0,[(n()(),a._18(0,null,null,3,"div",[["class","dialog"]],null,null,null,null,null)),(n()(),a._19(null,["\n  "])),a._24(null,0),(n()(),a._19(null,["\n"]))],null,null)}function i(n){return a._17(0,[(n()(),a._18(0,null,null,4,"div",[["class","overlay"]],null,null,null,null,null)),(n()(),a._19(null,["\n"])),(n()(),a._22(16777216,null,null,1,null,e)),a._20(16384,null,0,r.i,[a._10,a._11],{ngIf:[0,"ngIf"]},null),(n()(),a._19(null,["\n"]))],function(n,t){n(t,3,0,t.component.visible)},null)}function u(n){return a._17(0,[(n()(),a._22(16777216,null,null,1,null,i)),a._20(16384,null,0,r.i,[a._10,a._11],{ngIf:[0,"ngIf"]},null),(n()(),a._19(null,["\n"]))],function(n,t){n(t,1,0,t.component.visible)},null)}function o(n){return a._17(0,[(n()(),a._18(0,null,null,1,"imed-modal-dialog",[],null,null,null,u,p)),a._20(114688,null,0,c.a,[],null,null)],function(n,t){n(t,1,0)},null)}var s=l("HJV5"),a=l("/oeL"),r=l("qbdv"),c=l("P/ez");l.d(t,"b",function(){return p}),t.a=u;var g=[s.a],p=a._16({encapsulation:0,styles:g,data:{}});a._23("imed-modal-dialog",c.a,o,{visible:"visible"},{},["*"])},uQwo:function(n,t,l){"use strict";function e(n){return o._17(0,[(n()(),o._18(0,null,null,23,"form",[["class","starter-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,t,l){var e=!0,i=n.component;if("submit"===t){e=!1!==o._26(n,2).onSubmit(l)&&e}if("reset"===t){e=!1!==o._26(n,2).onReset()&&e}if("ngSubmit"===t){e=!1!==i.onStartChat()&&e}return e},null,null)),o._20(16384,null,0,a.f,[],null,null),o._20(540672,null,0,a.g,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),o._27(2048,null,a.h,null,[a.g]),o._20(16384,null,0,a.i,[a.h],null,null),(n()(),o._19(null,["\n  "])),(n()(),o._18(0,null,null,5,"input",[["class","form-control field-text w-input"],["formControlName","userName"],["name","userName"],["placeholder","Your Full Name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,l){var e=!0;if("input"===t){e=!1!==o._26(n,7)._handleInput(l.target.value)&&e}if("blur"===t){e=!1!==o._26(n,7).onTouched()&&e}if("compositionstart"===t){e=!1!==o._26(n,7)._compositionStart()&&e}if("compositionend"===t){e=!1!==o._26(n,7)._compositionEnd(l.target.value)&&e}return e},null,null)),o._20(16384,null,0,a.j,[o.I,o.J,[2,a.k]],null,null),o._27(1024,null,a.l,function(n){return[n]},[a.j]),o._20(671744,null,0,a.m,[[3,a.h],[8,null],[8,null],[2,a.l]],{name:[0,"name"]},null),o._27(2048,null,a.n,null,[a.m]),o._20(16384,null,0,a.o,[a.n],null,null),(n()(),o._19(null,["\n  "])),(n()(),o._19(null,["\n  "])),(n()(),o._18(0,null,null,5,"input",[["formControlName","queueName"],["name","queueName"]],[[8,"hidden",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,l){var e=!0;if("input"===t){e=!1!==o._26(n,15)._handleInput(l.target.value)&&e}if("blur"===t){e=!1!==o._26(n,15).onTouched()&&e}if("compositionstart"===t){e=!1!==o._26(n,15)._compositionStart()&&e}if("compositionend"===t){e=!1!==o._26(n,15)._compositionEnd(l.target.value)&&e}return e},null,null)),o._20(16384,null,0,a.j,[o.I,o.J,[2,a.k]],null,null),o._27(1024,null,a.l,function(n){return[n]},[a.j]),o._20(671744,null,0,a.m,[[3,a.h],[8,null],[8,null],[2,a.l]],{name:[0,"name"]},null),o._27(2048,null,a.n,null,[a.m]),o._20(16384,null,0,a.o,[a.n],null,null),(n()(),o._19(null,["\n  "])),(n()(),o._18(0,null,null,1,"button",[["class","btn btn-primary button-primary span-100 w-button top-margin"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(n()(),o._19(null,["Start Chat"])),(n()(),o._19(null,["\n"]))],function(n,t){n(t,2,0,t.component.starterForm);n(t,9,0,"userName");n(t,17,0,"queueName")},function(n,t){var l=t.component;n(t,0,0,o._26(t,4).ngClassUntouched,o._26(t,4).ngClassTouched,o._26(t,4).ngClassPristine,o._26(t,4).ngClassDirty,o._26(t,4).ngClassValid,o._26(t,4).ngClassInvalid,o._26(t,4).ngClassPending),n(t,6,0,o._26(t,11).ngClassUntouched,o._26(t,11).ngClassTouched,o._26(t,11).ngClassPristine,o._26(t,11).ngClassDirty,o._26(t,11).ngClassValid,o._26(t,11).ngClassInvalid,o._26(t,11).ngClassPending);n(t,14,0,!0,o._26(t,19).ngClassUntouched,o._26(t,19).ngClassTouched,o._26(t,19).ngClassPristine,o._26(t,19).ngClassDirty,o._26(t,19).ngClassValid,o._26(t,19).ngClassInvalid,o._26(t,19).ngClassPending),n(t,21,0,!l.starterForm.valid)})}function i(n){return o._17(0,[(n()(),o._18(0,null,null,1,"imed-chat-starter",[],null,null,null,e,c)),o._20(114688,null,0,s.a,[a.b],null,null)],function(n,t){n(t,1,0)},null)}var u=l("qG+G"),o=l("/oeL"),s=l("c3re"),a=l("bm2B");l.d(t,"b",function(){return c}),t.a=e;var r=[u.a],c=o._16({encapsulation:0,styles:r,data:{}});o._23("imed-chat-starter",s.a,i,{queues:"queues",username:"username"},{startChat:"startChat"},[])},wQAS:function(n,t,l){"use strict";var e=l("/oeL"),i=l("Z9N4"),u=l("bKpL");l.n(u);l.d(t,"a",function(){return o});var o=function(){function n(n,t){this.chatService=n,this.isSwitchOn=!1,this.messages=[],this.latestMessages=[],this.isTyping=!1,this.showExitConfirmDialog=!1,this.queues=[{name:"Q-BP_RefSupport_Chat",displayName:"Referrer Support",unavailable:""}];var l=t.selectRootElement("imed-chat-root");this.username=l.getAttribute("username"),this.username||(this.username="")}return n.prototype.ngOnInit=function(){},n.prototype.ngAfterViewInit=function(){var n=this;setTimeout(function(){n.updateQueueUnavails(),n.recoverSession()},500)},n.prototype.ngOnDestroy=function(){this.stopPollingEvent()},n.prototype.getCurrentStatus=function(){var n="INIT";return this.isImedBizHour()?this.chatService.isIninAvailable()&&this.isAnyQueueAvailable()?this.participantID&&this.participantID.length>0&&(n="ACTIVE"):n="CLOSED":(console.log("Not IMED Business Hour 9-17 Mon-Fri"),n="CLOSED"),n},n.prototype.isImedBizHour=function(){var n=new Date,t=n.getTime()+6e4*n.getTimezoneOffset(),l=new Date(t+396e5),e=l.getMonth()+1,i=l.getHours(),u=!1,o=n.getDay();return o>=1&&o<=5&&(u=e>=4&&e<=9?i>=10&&i<18:i>=9&&i<17),u},n.prototype.onClickSwitcher=function(){this.isSwitchOn&&"ACTIVE"==this.getCurrentStatus()?this.showExitConfirmModalDialog():(this.isSwitchOn=!this.isSwitchOn,this.isSwitchOn&&this.updateQueueUnavails())},n.prototype.updateQueueUnavails=function(){var n=this;this.queues.forEach(function(t){n.chatService.queueQuery("Anonymous User",t.name).subscribe(function(n){t.unavailable="","success"!=n.queue.status.type&&(t.unavailable=" - Closed")})})},n.prototype.isAnyQueueAvailable=function(){var n=0;return this.queues.forEach(function(t){0==t.unavailable.length&&n++}),n>0},n.prototype.startChat=function(n){var t=this;this.chatService.startChat(n.userName,n.queueName).subscribe(function(n){n.chat.participantID&&n.chat.participantID.length>0&&(t.participantID=n.chat.participantID,t.startPollingEvent(t.participantID))})},n.prototype.showExitConfirmModalDialog=function(){this.showExitConfirmDialog=!0},n.prototype.onExitChat=function(){this.showExitConfirmDialog=!1,this.exitChat()},n.prototype.exitChat=function(){var n=this;this.stopPollingEvent(),this.clearSession(),this.chatService.exitChat(this.participantID).subscribe(function(t){n.initVariables()},function(t){n.initVariables()})},n.prototype.initVariables=function(){this.participantID=null,this.isSwitchOn=!1,this.messages=[],this.latestMessages=[]},n.prototype.sendMessage=function(n){var t=this;this.chatService.sendMessage(this.participantID,n).subscribe(function(n){return t.addMessages(n.chat.events)})},n.prototype.startPollingEvent=function(n){var t=this;this.pollingSubscription=u.Observable.interval(2e3).switchMap(function(){return t.chatService.pollEvent(n)}).subscribe(function(n){t.addMessages(n.chat.events)})},n.prototype.addMessages=function(n){for(var t=0;t<n.length;t++)if("text"==n[t].type||"url"==n[t].type||"file"==n[t].type){var l=n[t],e=new Date,i=e.getHours(),u=e.getMinutes();l.createdAt=(i<10?"0"+i:i)+":"+(u<10?"0"+u:u),"00000000-0000-0000-0000-000000000000"==l.participantID&&(l.displayName="Chat System"),"file"==l.type&&(l.value=l.value.replace("/websvcs/",this.chatService.getIninRoot())),this.latestMessages.push(l),this.isTyping=!1,this.messages=[].concat(this.latestMessages),this.saveSession()}else"typingIndicator"==n[t].type&&(this.isTyping="false"!=n[t].value)},n.prototype.stopPollingEvent=function(){this.pollingSubscription&&this.pollingSubscription.unsubscribe()},n.prototype.saveSession=function(){console.log("saveSession()"),sessionStorage.setItem("imedrefchatid",this.participantID),sessionStorage.setItem("imedrefchatmsgs",JSON.stringify(this.messages))},n.prototype.clearSession=function(){console.log("clearSession()"),sessionStorage.removeItem("imedrefchatid"),sessionStorage.removeItem("imedrefchatmsgs")},n.prototype.recoverSession=function(){var n=sessionStorage.getItem("imedrefchatid");if(n&&n.length>0){var t=sessionStorage.getItem("imedrefchatmsgs");if(t&&t.length>0)try{this.messages=JSON.parse(t),this.latestMessages=JSON.parse(t),this.participantID=n,this.isSwitchOn=!0,console.log("Re-starting polling..."),this.startPollingEvent(this.participantID)}catch(n){console.log("Unable to get messsage object "+t)}}console.log("recoverSession()",this.messages,this.participantID)},n.ctorParameters=function(){return[{type:i.a},{type:e._9}]},n}()}},[0]);